@import url("https://fonts.googleapis.com/css2?family=Sora:wght@500;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap");

:root {
  --font-display: "Sora", "Avenir Next", "Segoe UI", sans-serif;
  --font-body: "IBM Plex Sans", "Segoe UI", sans-serif;

  --ink-900: #16202a;
  --ink-700: #30424f;

  --bg-0: #eef3f8;
  --surface: #ffffff;
  --surface-subtle: #f7fafc;

  --line: #d7e1e9;
  --line-strong: #bccbd8;

  --brand-700: #0f6f80;
  --brand-500: #1f8fa3;
  --success: #1f8f51;
  --error: #c23f39;

  --shadow: 0 10px 30px rgba(16, 37, 53, 0.08);

  color: var(--ink-900);
  font-family: var(--font-body);
}

* {
  box-sizing: border-box;
}

html,
body,
#root {
  height: 100%;
  margin: 0;
}

body {
  background: linear-gradient(180deg, #f5f8fc 0%, #eef3f8 100%);
}

.app-shell {
  height: 100%;
  display: grid;
  grid-template-rows: auto 1fr;
  gap: 10px;
  padding: 10px;
  overflow: hidden;
}

.pane-header {
  border: 1px solid var(--line);
  border-radius: 14px;
  background: var(--surface);
  box-shadow: var(--shadow);
  padding: 10px;
  display: grid;
  gap: 8px;
  animation: fade-up 0.22s ease;
}

.pane-title-group {
  display: grid;
  gap: 2px;
}

.pane-title-group .fui-Text {
  font-family: var(--font-display);
  line-height: 1.08;
}

.pane-controls {
  display: grid;
  gap: 8px;
}

.status-chip {
  display: inline-flex;
  align-items: center;
  width: fit-content;
  border-radius: 999px;
  border: 1px solid var(--line-strong);
  padding: 3px 8px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.03em;
  text-transform: uppercase;
}

.status-chip.ready {
  color: var(--success);
  border-color: #b7dec7;
  background: #effaf3;
}

.status-chip.busy {
  color: var(--brand-700);
  border-color: #b8dce4;
  background: #edf8fb;
}

.main-surface {
  min-height: 0;
  border: 1px solid var(--line);
  border-radius: 16px;
  background: var(--surface);
  box-shadow: var(--shadow);
  display: grid;
  grid-template-rows: auto 1fr;
  padding: 10px;
  gap: 8px;
  animation: fade-up 0.26s ease;
}

.main-nav {
  border-bottom: 1px solid var(--line);
  padding-bottom: 6px;
}

.workspace-stack,
.settings-stack {
  min-height: 0;
}

.workspace-stack {
  display: grid;
  grid-template-rows: minmax(250px, 1fr) minmax(170px, 0.65fr) minmax(180px, 0.75fr);
  gap: 10px;
}

.panel {
  border: 1px solid var(--line);
  border-radius: 12px;
  background: var(--surface-subtle);
  min-height: 0;
  display: grid;
  gap: 8px;
  padding: 8px;
}

.panel-requests {
  grid-template-rows: auto auto 1fr auto;
}

.panel-timeline,
.panel-changes {
  grid-template-rows: auto 1fr;
}

.panel-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.panel-body {
  min-height: 0;
  overflow: auto;
}

.panel-foot {
  border-top: 1px solid var(--line);
  padding-top: 6px;
}

.action-toolbar {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 6px;
}

.action-btn {
  justify-content: center;
  border-radius: 10px;
  border: 1px solid var(--line-strong);
  background: #ffffff;
}

.action-btn.action-btn-danger {
  border-color: #e0b6b3;
}

.chat-panel {
  height: 100%;
  min-height: 0;
  display: grid;
  grid-template-rows: 1fr auto auto;
  gap: 8px;
}

.chat-scroll,
.changes-list {
  min-height: 0;
  overflow: auto;
  padding-right: 2px;
}

.chat-message {
  border: 1px solid var(--line);
  border-radius: 10px;
  background: #ffffff;
  padding: 8px;
  display: grid;
  gap: 7px;
  margin-bottom: 7px;
  animation: fade-up 0.15s ease;
}

.chat-user {
  background: #eef8fc;
}

.chat-tool,
.chat-memory,
.chat-system {
  background: #f4f7fa;
}

.chat-meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 8px;
}

.chat-role-pill {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  border: 1px solid var(--line-strong);
  padding: 2px 7px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.chat-role-pill.role-user {
  color: #0f6f80;
  border-color: #b8dce4;
}

.chat-role-pill.role-assistant {
  color: #2e4959;
}

.chat-role-pill.role-tool,
.chat-role-pill.role-memory,
.chat-role-pill.role-system {
  color: #5f7685;
}

.sources-block {
  display: grid;
  gap: 6px;
}

.sources-list {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.citation-chip {
  border-radius: 999px;
  border: 1px solid #b8dce4;
  background: #edf8fb;
  color: #0f6f80;
}

.composer {
  display: grid;
  gap: 8px;
}

.composer-actions {
  display: flex;
  justify-content: flex-end;
}

.timeline-panel {
  height: 100%;
  min-height: 0;
  display: grid;
  grid-template-rows: 1fr auto;
  gap: 8px;
}

.timeline-steps,
.tool-cards {
  min-height: 0;
  overflow: auto;
  display: grid;
  gap: 7px;
  padding-right: 2px;
}

.timeline-step-card,
.tool-card,
.diff-card,
.settings-section {
  border-radius: 10px;
  border: 1px solid var(--line);
  background: #ffffff;
}

.status-pill {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  border: 1px solid var(--line-strong);
  padding: 2px 7px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.status-pill.status-success {
  color: var(--success);
  border-color: #b7dec7;
}

.status-pill.status-running {
  color: var(--brand-700);
  border-color: #b8dce4;
}

.status-pill.status-error {
  color: var(--error);
  border-color: #e0b6b3;
}

.status-pill.status-pending,
.status-pill.status-cancelled {
  color: #6c8291;
}

.timeline-details,
.tool-grid {
  display: grid;
  gap: 4px;
}

.diff-card {
  background: #ffffff;
}

.diff-meta-row {
  display: flex;
  justify-content: space-between;
  gap: 8px;
}

.diff-pre,
.tool-details-pre {
  white-space: pre-wrap;
  max-height: 130px;
  overflow: auto;
  border: 1px solid var(--line);
  border-radius: 8px;
  padding: 8px;
  background: #f5f8fb;
  font-size: 12px;
}

.settings-stack {
  height: 100%;
  min-height: 0;
}

.settings-panel {
  height: 100%;
  min-height: 0;
  overflow: auto;
  display: grid;
  gap: 9px;
  padding-right: 2px;
}

.settings-head {
  display: grid;
  gap: 2px;
}

.settings-section {
  display: grid;
  gap: 8px;
  padding: 9px;
  background: #ffffff;
}

.settings-warning {
  border: 1px solid #e4c99d;
  border-radius: 10px;
  padding: 8px;
  background: #fff7ea;
  display: grid;
  gap: 4px;
}

.busy-indicator {
  position: absolute;
  right: 14px;
  bottom: 14px;
  border: 1px solid var(--line);
  border-radius: 10px;
  background: #ffffff;
  box-shadow: var(--shadow);
  padding: 7px 9px;
}

@keyframes fade-up {
  from {
    opacity: 0;
    transform: translateY(5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@media (max-width: 420px) {
  .workspace-stack {
    grid-template-rows: minmax(250px, 1fr) minmax(190px, 0.65fr) minmax(190px, 0.75fr);
  }

  .action-toolbar {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}
